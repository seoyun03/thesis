/* ===== 기본: 전체 화면 ===== */
html, body {
  height: 100%;
  margin: 0;
  background: #000;
  overflow: hidden;
  color: #e6e6e6;
  font-family: Arial, Helvetica, sans-serif;
}
.stage {
  position: relative;
  width: 100vw; height: 100vh;
  overflow: hidden;
}

/* ===== 캔버스 ===== */
#heat {
  display: block;
  width: 100vw;
  height: 100vh;
  cursor: none;           /* 필요 시 보이게 변경 */
  image-rendering: auto;
  position: absolute; inset: 0;
}

/* ===== 왜곡/노이즈 (화면 전체 느낌용) ===== */
:root{
  --distort:0;  /* 0~1 */
}
.distort-overlay{
  position:absolute; inset:-10vmax;
  filter:url(#distortFilter);
  pointer-events:none;
  opacity:calc(.12 + .5 * var(--distort));
  transform:translateZ(0);
}
.jitter{
  animation:jitter .9s steps(2,end) infinite;
  opacity:calc(.02 + var(--distort)*.10);
  position:absolute; inset:0; pointer-events:none;
  background:
    repeating-linear-gradient(0deg, rgba(255,255,255,.03) 0 1px, transparent 1px 3px);
}
@keyframes jitter{
  0%{ transform:translate(0,0) }
  50%{ transform:translate(.3px,.6px) }
  100%{ transform:translate(0,0) }
}

/* ===== 떠 있는 텍스트 ===== */
.floating{
  position:absolute; inset:0;
  pointer-events:none;           /* 히트맵 인터랙션 방해 X */
}

/* 각각의 단어/문장 */
.word{
  position:absolute;
  transform: translate(-50%, -50%);
  white-space: nowrap;
  color:#eef3ff;
  will-change: transform, filter, opacity, clip-path, text-shadow;
  filter: drop-shadow(0 6px 14px rgba(0,0,0,.25));
}

.word.s { font-size: clamp(8px, 1vw, 10px); opacity:.8; }
.word.m { font-size: clamp(10px, 1.6vw, 14px); }
.word.l { font-size: clamp(14px, 2.6vw, 22px); }


/* === GLITCH 효과 === */
.word.glitch{
  animation: glitchPulse 1.1s infinite;
}
@keyframes glitchPulse{
  0%   { text-shadow: 0 0 0 rgba(255,90,90,.0), 0 0 0 rgba(90,220,255,.0) }
  20%  { text-shadow: 1px 0 rgba(255,90,90,.8), -1px 0 rgba(90,220,255,.8) }
  21%  { text-shadow: -1px 0 rgba(255,90,90,.8), 1px 0 rgba(90,220,255,.8) }
  22%  { text-shadow: 0 0 0 rgba(255,90,90,.0), 0 0 0 rgba(90,220,255,.0) }
  48%  { filter: none; }
  50%  { filter: hue-rotate(8deg) saturate(1.2) }
  100% { text-shadow: 0 0 0 rgba(255,90,90,.0), 0 0 0 rgba(90,220,255,.0) }
}

/* 수평/수직 슬라이스(가끔 튀는 느낌) */
.word.glitch::before,
.word.glitch::after{
  content: attr(data-txt);
  position:absolute; left:0; top:0; right:0; bottom:0;
  transform: translate(0,0);
  clip-path: inset(0 0 48% 0);
  mix-blend-mode: lighten;
  opacity:.22;
}
.word.glitch::after{
  clip-path: inset(52% 0 0 0);
  opacity:.18;
}

.word.drop{
  animation: dropOut 0.7s cubic-bezier(.25,.9,.3,1) forwards; /* 1.2s → 0.7s 로 단축 */
}
@keyframes dropOut{
  0%   { transform: translate(-50%,-50%) translateY(0) rotateX(0) rotateZ(0); filter: blur(0); opacity:1 }
  50%  { transform: translate(-50%,-50%) translateY(25vh) rotateX(10deg) rotateZ(2deg); filter: blur(2px); opacity:.9 }
  100% { transform: translate(-50%,-50%) translateY(50vh) rotateX(15deg) rotateZ(5deg); filter: blur(5px); opacity:0 }
}

/* 모션-감소 선호 */
@media (prefers-reduced-motion: reduce){
  .jitter, .word.glitch, .word.drop { animation:none !important }
}
/* 깜빡임(Blink) — 글리치와 동시에 적용 가능하도록 조합 규칙 포함 */
.word{ --blink-delay: 0s; }

.word.blink{
  animation: blink 1.1s steps(1,end) infinite;
  animation-delay: var(--blink-delay);
}

/* glitch + blink가 동시에 걸릴 때 두 애니메이션을 함께 돌림 */
.word.glitch.blink{
  animation: glitchPulse 1.1s infinite, blink 1.1s steps(1,end) infinite;
  /* 각각의 delay를 순서대로 지정: glitch는 0s, blink는 가변 지연 */
  animation-delay: 0s, var(--blink-delay);
}

/* 불규칙한 점멸 느낌 */
@keyframes blink{
  0%, 38%   { opacity: 1 }
  39%, 46%  { opacity: .05 }
  47%, 74%  { opacity: 1 }
  75%, 78%  { opacity: .25 }
  79%, 100% { opacity: 1 }
}
